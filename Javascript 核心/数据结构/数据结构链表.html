<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据结构 链表</title>
</head>
<body>
    <ul>
        <li>
            <h3>链表</h3>
        </li>
        <li>
            <p>
                链表中的每一个节点都是零散的存储在内存中
            </p>
        </li>
        <li>
            <p>
                查找链表 只能够从 链表的两端开始 遍历查抄
            </p>
        </li>
        <li>
            <p><pre>singlyLinkedList</pre>单项链表</p>
            <p><pre>singlyLinkedCircularList</pre></p>
            <p><pre>doubleLinkedList</pre>双向链表</p>
            <p><pre>doubleLinkedCircularList</pre></p>
        </li>
    </ul>
    <script>
        // 链表 
        // 链表节点的数据结构
        // singlyLinkedListNode = {el: "", next: ""}
        // doubleLinkedLinstNode = {el: "", next: "", pre: ""}
        // singlyLinkedCircularListNode = {el: '', next: ''} 最有一个链表节点始终指向 第一个链表节点
        // doubleLinkedCircularLinstNode = {el: "", next: '', pre: ""} 最后一个节点指向第一个节点，第一个节点同时会指向最后一个节点

        // 单向链表节点类
        class SinglyLinkedListNode {
            _symbolEl = Symbol('el')
            _symbolNext = Symbol('next')
            // 元素
            el = null;
            // 下一个 singlyLinkedListNode
            next = null; 
            constructor(el = null, next = null){
                this.el = el;
                this.next = next;
            }

            // 在next位置插入新的元素
            addNext(newEl){
                const newNode = new SinglyLinkedListNode(newEl, this.next);
                this.next = newNode;
            }

            // 删除 next 位置的元素
            delNext(){
                el.next = el.next && el.next.next;
            }

            // 更新当前节点的 元素
            updateEl(newEl){
                this.el = newEl;
            }
        }

        // 单向链表
        class SinglyLinkedList {
            constructor(){}

            // 链表的头
            head = null;

            // 链表的长度
            length = 0;

            // 向 singlyLinkedList 末尾添加项
            push(node){
                if(this.head === null){
                    this.head = node 
                }else{
                    let current = this.head;
                    while(current.next){
                        current = current.next;
                    }
                    current.next = node
                }
                this.length++;
                return this;
            }

            // 向 singlyLinkedList 指定的位置添加项
            insertAt(node, id){
               
                let current = this.head;
                let hasMatching = false;

                while(current){
                    
                    if(current.el.id === id){
                        node.next = current.next;
                        current.next = node;
                        hasMatching = true;
                        this.length++;
                        return this
                    }else{
                        current = current.next
                    }
                }

                console.error('没有找到匹配的项')
                return this;
            }

            // 删除指定项
            delAt(id){
                let current = this.head
                let hasMatching = false
                
                while(current){
                    if(current.next && current.next.el.id === id){
                        current.next = current.next.next;
                        hasMatching = true;
                        this.length--;
                    }
                    current = current.next;
                }
                 
                return this;
            }

            // 查找指定项
            find(id){
                let current = this.head;

                while(current){
                    if(current.id === id){
                        return current;
                    }else{
                        current = current.next;
                    }
                    
                }

                return null
            }
            
            // 是否为空
            isEmpty(){
                return this.length === 0;
            }

            // 遍历
            forEach(fn){
                let current = this.head;
                while(current){
                    fn(current);
                    current = current.next;
                }
                return this;
            }
        }

        // 创建一个链表 el 的数组

        let a = [];
        for(let i = 0; i < 10; i++){
            a.push({id: i})
        }

        console.log('a: ', a)
        const singlyLinkedList = new SinglyLinkedList();

        a.forEach(el => {
            // 向 链表的结尾添加新的节点
            singlyLinkedList.push(new SinglyLinkedListNode(el))
            console.log('singlyLinkedList.length: ', singlyLinkedList.length)
        })
        
      
        singlyLinkedList.insertAt(
            new SinglyLinkedListNode({id: "name"}),
            3
        )

      
        singlyLinkedList.delAt('name');

        console.log(singlyLinkedList.find('9'))
        console.log(singlyLinkedList.isEmpty())


        // 遍历
        singlyLinkedList.forEach(singlyLinkedListNode => {
            console.log(singlyLinkedListNode.el)
        })


        


        
    </script>
</body>
</html>